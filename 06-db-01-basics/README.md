# Домашнее задание к занятию 1. «Типы и структура СУБД» - Леонид Хорошев

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определённых данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:
- электронные чеки в json-виде - отлично подойдут документоориентированные базы данных, так как каждый чек является отдельным документом со своим набором позиций, суммой, датой покупки и т.д. В нашем случае можно использовать СУБД MongoDB;
- склады и автомобильные дороги для логистической компани - тут набор данных о товаре на складах (артикул, стоимость, количество позиций), а также об автодорогах (наименование, протяженность, расстояние между точками поставки и т.д.) отлично структурируется в формате взаимосвязанных друг с другом таблиц, что позволяет использовать реляционные базы данных, например PostrgeSQL, как более функциональную по сравнению с MySQL;
- генеалогические деревья - в данном случае можно применить СУБД на основе графов, где указать зависимости (родство) между отдельными ее элеиентами. Самый очевидный выбор - Neo4j (самая широко распространенная графовая СУБД в мире); 
- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации - наиболее подходящий вариант - СУБД типа "ключ-значение", например Redis и Memcached. Их преимущество при работе с кэшем и другими временными данными - это возможность хранения всей информации в оперативной памяти, а аткже возможность присваивать данным time-to-live (далее - TTL), то есть задавать параметры жизненного цикла. Преимущества Redis - более широкий функционал, а Memcached - простота использования, но в данном конкретном случае я бы остановился на Redis, так как данная СУБД больше подходит для работы с идентификаторами клиентов за счет возможности применять политики вытеснения для ключей с истекшим TTL;
- отношения клиент-покупка для интернет-магазина - данном кейсе информация отлично ложится в формат структурированных таблиц (ФИО, Id клиента, даты покупки, артикул товара, количество, стоимость, скида и т.д.), следовательно применям реляционную СУБД  PostrgeSQL.

## Задача 2

Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):

- данные записываются на все узлы с задержкой до часа (асинхронная запись) - система не гарантирует одинаковые данные на всех узлах в момент времени, но при этом все узлы остаются доступными;
- при сетевых сбоях система может разделиться на 2 раздельных кластера;
- система может не прислать корректный ответ или сбросить соединение.

Согласно PACELC-теореме как бы вы классифицировали эти реализации?

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему? 

Если коротко, то не могут, так как данные принципы взаимоисключают друг друга.

ACID — это набор требований к СУБД, обеспечивающих надёжность и предсказуемость её работы, то есть стандарт того, какие гарантии должна давать база данных, чтобы поддерживать транзакции (транзакция – способ изменить состояние взаимосвязанных данных сразу в нескольких местах). Так как транзакции нужны далеко не каждому сервису, то многие СУБД NoSQL жертвуют принципами ASID (атомарность, согласованность, изоляция, стойкость) ради более высокой производительности, и тут появляется принцип BASE, который противопоставляет себя ACID. Принципы, заложенные в BASE (базовая доступность, неустойчивое состояние и конечная согласованность) обеспечивают доступность и возможность работать в режиме мягкого состояния и конечной согласованности. Это означает, что система может оставаться доступной, даже если она находится в не полностью согласованном состоянии на определенном этапе. Такой подход может использоваться в распределенных системах, сетевых приложениях, Big Data и т.д.




## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни,
- реакция на истечение таймаута.

Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. 
Что это за система? Какие минусы выбора этой системы?



---

